\hypertarget{class_cool_board}{}\section{Cool\+Board Class Reference}
\label{class_cool_board}\index{Cool\+Board@{Cool\+Board}}


This class manages the \hyperlink{class_cool_board}{Cool\+Board} and all of Its functions.  




{\ttfamily \#include $<$Cool\+Board.\+h$>$}



Collaboration diagram for Cool\+Board\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d3a/class_cool_board__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_cool_board_a8b88fd781e22e93025dd63474113b7e4}{Cool\+Board} ()
\item 
void \hyperlink{class_cool_board_acba7c5aef7268b2c0044bdb54d3b9d76}{begin} ()
\item 
bool \hyperlink{class_cool_board_a583a874c09c07e70a6eb9229fc4beddb}{config} ()
\item 
void \hyperlink{class_cool_board_a8612756d3f73198cdde857a66f0fe690}{update} (const char $\ast$\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer})
\item 
void \hyperlink{class_cool_board_ae6b5e1274d760462290192acea4adca8}{off\+Line\+Mode} ()
\item 
void \hyperlink{class_cool_board_aa0bbc4bc605e35618d18e68795c61363}{on\+Line\+Mode} ()
\item 
int \hyperlink{class_cool_board_a519de78b807f8ec6463ff484eb925918}{connect} ()
\item 
int \hyperlink{class_cool_board_ad7442cf4b62c7b0d5bd62a0f75ffc065}{is\+Connected} ()
\item 
unsigned long \hyperlink{class_cool_board_a7508e029f2ee17bb747ffab599285e0d}{get\+Log\+Interval} ()
\item 
void \hyperlink{class_cool_board_a486507b8f0981d3cc671ed31c2145755}{print\+Conf} ()
\item 
void \hyperlink{class_cool_board_a069952cdcb2e7f68518aa429eceadb6e}{sleep} (unsigned long interval)
\item 
String \hyperlink{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}{read\+Sensors} ()
\item 
void \hyperlink{class_cool_board_a397b46fadab8f530a8cf4d914c561366}{init\+Read\+I2C} ()
\item 
String \hyperlink{class_cool_board_ae7358fb6e623cfc81b775f5f1734909b}{user\+Data} ()
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_cool_file_system}{Cool\+File\+System} \hyperlink{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}{file\+System}
\item 
\hyperlink{class_cool_board_sensors}{Cool\+Board\+Sensors} \hyperlink{class_cool_board_af102be5288bd7f7a8e59b13f86e26a00}{cool\+Board\+Sensors}
\item 
\hyperlink{class_cool_board_led}{Cool\+Board\+Led} \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{cool\+Board\+Led}
\item 
\hyperlink{class_cool_time}{Cool\+Time} \hyperlink{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}{rtc}
\item 
\hyperlink{class_cool_wifi}{Cool\+Wifi} \hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifi\+Manager}
\item 
\hyperlink{class_cool_m_q_t_t}{Cool\+M\+Q\+TT} \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}
\item 
\hyperlink{class_jetpack}{Jetpack} \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jet\+Pack}
\item 
\hyperlink{class_irene3000}{Irene3000} \hyperlink{class_cool_board_ad103718ce316006c4695b8eb312eaf11}{irene3000}
\item 
\hyperlink{class_external_sensors}{External\+Sensors} \hyperlink{class_cool_board_a09e26264839c65873eb56af476eff6b2}{external\+Sensors}
\item 
\hyperlink{class_cool_board_actor}{Cool\+Board\+Actor} \hyperlink{class_cool_board_a4ac693895c21025b8808653f2a4316e6}{on\+Board\+Actor}
\item 
bool \hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{user\+Active} =0
\item 
bool \hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{irene\+Active} =0
\item 
bool \hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpack\+Active} =0
\item 
bool \hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{external\+Sensors\+Active} =0
\item 
bool \hyperlink{class_cool_board_a0a51b2287139f66c738101fb53139230}{sleep\+Active} =0
\item 
bool \hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual} =0
\item 
unsigned long \hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{log\+Interval} =1
\item 
String \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data} =\char`\"{}\char`\"{}
\item 
String \hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer} =\char`\"{}\char`\"{}
\item 
const int \hyperlink{class_cool_board_af1fe1376fc66f93dee80b327ca695377}{En\+I2C} = 5
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This class manages the \hyperlink{class_cool_board}{Cool\+Board} and all of Its functions. 

Definition at line 56 of file Cool\+Board.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_cool_board_a8b88fd781e22e93025dd63474113b7e4}\label{class_cool_board_a8b88fd781e22e93025dd63474113b7e4}} 
\index{Cool\+Board@{Cool\+Board}!Cool\+Board@{Cool\+Board}}
\index{Cool\+Board@{Cool\+Board}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{Cool\+Board()}{CoolBoard()}}
{\footnotesize\ttfamily Cool\+Board\+::\+Cool\+Board (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_a8b88fd781e22e93025dd63474113b7e4}{Cool\+Board\+::\+Cool\+Board()}\+: This Constructor is provided to start the I2C interface and Init the different used pins 

Definition at line 50 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
51 \{
52 
53 \textcolor{preprocessor}{#if DEBUG == 1}
54 
55     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard Constructor"}) );
56     Serial.println();
57 
58 \textcolor{preprocessor}{#endif}
59     
60     Wire.begin(2, 14);                       \textcolor{comment}{//I2C init }
61 
62     pinMode(\hyperlink{class_cool_board_af1fe1376fc66f93dee80b327ca695377}{EnI2C}, OUTPUT);           \textcolor{comment}{//Declare I2C Enable pin }
63 
64 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_cool_board_acba7c5aef7268b2c0044bdb54d3b9d76}\label{class_cool_board_acba7c5aef7268b2c0044bdb54d3b9d76}} 
\index{Cool\+Board@{Cool\+Board}!begin@{begin}}
\index{begin@{begin}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{begin()}{begin()}}
{\footnotesize\ttfamily void Cool\+Board\+::begin (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_acba7c5aef7268b2c0044bdb54d3b9d76}{Cool\+Board\+::begin()}\+: This method is provided to configure and start the used Cool\+Kit Parts. It also starts the first connection try If Serial is enabled,it prints the configuration of the used parts. 

Definition at line 75 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
76 \{
77 
78 \textcolor{preprocessor}{#if DEBUG == 1}
79 
80     Serial.println( F(\textcolor{stringliteral}{"Starting the CoolBoard  "})  );
81     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.begin() "})  );
82     Serial.println();
83 \textcolor{preprocessor}{#endif  }
84 
85 \textcolor{preprocessor}{#if DEBUG == 0}
86     Serial.println( F(\textcolor{stringliteral}{"Starting Coolboard..."}));
87 \textcolor{preprocessor}{#endif}
88 
89 
90     delay(100);
91     
92     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a30fadd4cbec17ceea428bf7a32207e87}{write}(255,128,0);\textcolor{comment}{//orange}
93 
94     this->\hyperlink{class_cool_board_a397b46fadab8f530a8cf4d914c561366}{initReadI2C}();
95     delay(50);
96 
97     \hyperlink{class_cool_board_af102be5288bd7f7a8e59b13f86e26a00}{coolBoardSensors}.\hyperlink{class_cool_board_sensors_a9a218895c5423375c33c08f2c56fb23a}{config}();
98     \hyperlink{class_cool_board_af102be5288bd7f7a8e59b13f86e26a00}{coolBoardSensors}.\hyperlink{class_cool_board_sensors_a97095823ef7c8f5290812f1405b966b3}{begin}();
99     delay(100);
100     
101     \hyperlink{class_cool_board_a4ac693895c21025b8808653f2a4316e6}{onBoardActor}.\hyperlink{class_cool_board_actor_a5af5538fc7d169f63127e06d5219bcd4}{config}();
102     \hyperlink{class_cool_board_a4ac693895c21025b8808653f2a4316e6}{onBoardActor}.\hyperlink{class_cool_board_actor_a7f4422fd85a5510bc2cdfd68e109be5e}{begin}();
103     delay(100);
104     
105     \hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a4eb2f6b9b09dd588964b88b6c70122c0}{config}();
106     \hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a46942fed90e475112cc10b78a32e7aaa}{begin}();
107     delay(100);
108 
109     \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a9b703de4f1358f0ee7a5e8c44979c648}{config}();
110     \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ac9248808641ebf3054ed0620ea9d0100}{begin}();
111     delay(100);
112 
113 \textcolor{preprocessor}{#if DEBUG == 1}
114 
115     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a8ed3053a36f0ed4a131f43b5b17efb61}{printConf}();
116 
117     \hyperlink{class_cool_board_af102be5288bd7f7a8e59b13f86e26a00}{coolBoardSensors}.\hyperlink{class_cool_board_sensors_af6fd79505815b204c178617ecf54c873}{printConf}();
118 
119     \hyperlink{class_cool_board_a4ac693895c21025b8808653f2a4316e6}{onBoardActor}.\hyperlink{class_cool_board_actor_aabb10e7aebc3249ffc940530de29f84a}{printConf}();
120 
121     \hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a9e6105c6d13d35ec510f6633da9e0223}{printConf}();
122 
123     \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a40553a0ad4b5ecf1cb4411ab54ca85fb}{printConf}();
124     
125 
126 \textcolor{preprocessor}{#endif}
127 
128 
129     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive})
130     \{
131         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_ab065ee83e244265a2223a22f3ee4a719}{config}();
132         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a5a53e1ebf7aaf3bf3e0d37ea64ca09a7}{begin}();
133 
134 \textcolor{preprocessor}{    #if DEBUG == 1}
135         
136         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_ac54a7bb4f9166bee32052253d9b1d306}{printConf}();
137 
138 \textcolor{preprocessor}{    #endif}
139         delay(100);
140     \}
141 
142     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{ireneActive})
143     \{
144         \hyperlink{class_cool_board_ad103718ce316006c4695b8eb312eaf11}{irene3000}.\hyperlink{class_irene3000_afed5c35e4b23963c157847ef27c11e9c}{config}();
145         \hyperlink{class_cool_board_ad103718ce316006c4695b8eb312eaf11}{irene3000}.\hyperlink{class_irene3000_ad5891806c500ae1007afe52b9e304c2b}{begin}();
146 
147 \textcolor{preprocessor}{    #if DEBUG == 1}
148 
149         \hyperlink{class_cool_board_ad103718ce316006c4695b8eb312eaf11}{irene3000}.\hyperlink{class_irene3000_a7bc2414100b5e19eacc6630fa34b2654}{printConf}();
150 
151 \textcolor{preprocessor}{    #endif}
152         delay(100);
153     \}
154 
155     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{externalSensorsActive})
156     \{
157         \hyperlink{class_cool_board_a09e26264839c65873eb56af476eff6b2}{externalSensors}.\hyperlink{class_external_sensors_a862a4bd11346b37270d0244c2adabe5a}{config}();
158         \hyperlink{class_cool_board_a09e26264839c65873eb56af476eff6b2}{externalSensors}.\hyperlink{class_external_sensors_a58ede0d786a86417254708870f04a21e}{begin}();
159 
160 \textcolor{preprocessor}{    #if DEBUG == 1}
161 
162         \hyperlink{class_cool_board_a09e26264839c65873eb56af476eff6b2}{externalSensors}.\hyperlink{class_external_sensors_a78c2bf55084435dd51d3c559b2d3c6f3}{printConf}();
163 
164 \textcolor{preprocessor}{    #endif}
165         delay(100);
166     \}
167     
168     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(255,128,0,0.5);\textcolor{comment}{//orange}
169 
170     this->\hyperlink{class_cool_board_a519de78b807f8ec6463ff484eb925918}{connect}();
171     delay(100);
172 
173     \hyperlink{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}{rtc}.\hyperlink{class_cool_time_a87c28260c1bc77091162cbcf1ee2e129}{config}();
174     \hyperlink{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}{rtc}.\hyperlink{class_cool_time_ab1976cf718b950bc31e003c3323b8adb}{begin}();
175 
176 \textcolor{preprocessor}{#if DEBUG == 1}
177 
178     \hyperlink{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}{rtc}.\hyperlink{class_cool_time_af355e7f9b3898211cd2ff25eab5933b1}{printConf}();
179 
180 \textcolor{preprocessor}{#endif}
181     delay(100);
182     
183     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(0,255,0,0.5);\textcolor{comment}{//green}
184 
185 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d7/df9/class_cool_board_acba7c5aef7268b2c0044bdb54d3b9d76_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_a583a874c09c07e70a6eb9229fc4beddb}\label{class_cool_board_a583a874c09c07e70a6eb9229fc4beddb}} 
\index{Cool\+Board@{Cool\+Board}!config@{config}}
\index{config@{config}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{config()}{config()}}
{\footnotesize\ttfamily bool Cool\+Board\+::config (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_a583a874c09c07e70a6eb9229fc4beddb}{Cool\+Board\+::config()}\+: This method is provided to configure the \hyperlink{class_cool_board}{Cool\+Board} \+: -\/log interval -\/irene3000 activated/deactivated -\/jetpack activated/deactivated -\/external Sensors activated/deactivated -\/mqtt server timeout

\begin{DoxyReturn}{Returns}
true if configuration is done, false otherwise 
\end{DoxyReturn}


Definition at line 727 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
728 \{
729     yield();
730 
731 \textcolor{preprocessor}{#if DEBUG == 1}
732 
733     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.config() "}) );
734     Serial.println();
735 
736 \textcolor{preprocessor}{#endif}
737 \textcolor{preprocessor}{#if DEBUG == 0}
738     Serial.println();
739     Serial.println( F(\textcolor{stringliteral}{"Loading configuration for this CoolBoard..."}));
740 \textcolor{preprocessor}{#endif }
741 
742     \textcolor{comment}{//open file system}
743     \hyperlink{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}{fileSystem}.\hyperlink{class_cool_file_system_a6ba6f666ed4c530174f8569d2c636748}{begin}();
744     
745     \textcolor{comment}{//start the led}
746     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a1b60e5e30bea96c49ed62ed1bf1ffc8b}{config}();
747     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ae3cbde8affcc6f011cbd698c8ef911f6}{begin}();
748     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(243,171,46,0.5);\textcolor{comment}{//shade of orange     }
749 
750     
751     \textcolor{comment}{//open configuration file}
752     File configFile = SPIFFS.open(\textcolor{stringliteral}{"/coolBoardConfig.json"}, \textcolor{stringliteral}{"r"});
753     
754     \textcolor{keywordflow}{if} (!configFile)
755 
756     \{
757     
758         Serial.println( F(\textcolor{stringliteral}{"failed to read /coolBoardConfig.json  "}) );
759 
760         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(255,0,0,0.5);\textcolor{comment}{//shade of red     }
761         \textcolor{keywordflow}{return}(\textcolor{keyword}{false});
762     \}
763 
764     \textcolor{keywordflow}{else}
765     \{
766         \textcolor{keywordtype}{size\_t} size = configFile.size();
767 
768         \textcolor{comment}{// Allocate a buffer to store contents of the file.}
769         std::unique\_ptr < char[] > buf(\textcolor{keyword}{new} \textcolor{keywordtype}{char}[size]);
770 
771         configFile.readBytes(buf.get(), size);
772 
773         DynamicJsonBuffer jsonBuffer;
774 
775         JsonObject & json = jsonBuffer.parseObject(buf.get());
776 
777         \textcolor{keywordflow}{if} (!json.success())
778         \{
779         
780             Serial.println( F(\textcolor{stringliteral}{"failed to parse CoolBoard Config json object "}) );
781     
782             \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(255,0,0,0.5);\textcolor{comment}{//shade of red     }
783             \textcolor{keywordflow}{return}(\textcolor{keyword}{false});
784         \}
785 
786         \textcolor{keywordflow}{else}
787         \{   
788         
789 \textcolor{preprocessor}{        #if DEBUG == 1}
790             
791             Serial.println( F(\textcolor{stringliteral}{"configuration json : "}) );
792             json.printTo(Serial);
793             Serial.println();
794             
795             Serial.print(F(\textcolor{stringliteral}{"jsonBuffer size : "}));
796             Serial.print(jsonBuffer.size());
797             Serial.println();
798 
799 \textcolor{preprocessor}{        #endif}
800             
801             \textcolor{comment}{//parsing userActive Key}
802             \textcolor{keywordflow}{if} (json[\textcolor{stringliteral}{"userActive"}].success())
803             \{
804                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{userActive} = json[\textcolor{stringliteral}{"userActive"}];
805             \}
806 
807             \textcolor{keywordflow}{else}
808             \{
809                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{userActive} = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{userActive};
810             \}
811             json[\textcolor{stringliteral}{"userActive"}] = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{userActive};
812 
813             \textcolor{comment}{//parsing logInterval key}
814             \textcolor{keywordflow}{if} (json[\textcolor{stringliteral}{"logInterval"}].success())
815             \{
816                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{logInterval} = json[\textcolor{stringliteral}{"logInterval"}];
817             \}
818             \textcolor{keywordflow}{else}
819             \{
820                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{logInterval} = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{logInterval};
821             \}
822             json[\textcolor{stringliteral}{"logInterval"}] = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{logInterval};
823             
824             \textcolor{comment}{//parsing ireneActive key           }
825             \textcolor{keywordflow}{if} (json[\textcolor{stringliteral}{"ireneActive"}].success())
826             \{
827                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{ireneActive} = json[\textcolor{stringliteral}{"ireneActive"}];
828             \}
829             \textcolor{keywordflow}{else}
830             \{
831                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{ireneActive} = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{ireneActive};
832             \}
833             json[\textcolor{stringliteral}{"ireneActive"}] = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{ireneActive};
834             
835             \textcolor{comment}{//parsing jetpackActive key}
836             \textcolor{keywordflow}{if} (json[\textcolor{stringliteral}{"jetpackActive"}].success())
837             \{
838                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive} = json[\textcolor{stringliteral}{"jetpackActive"}];
839             \}
840             \textcolor{keywordflow}{else}
841             \{
842                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive} = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive};
843             \}
844             json[\textcolor{stringliteral}{"jetpackActive"}] = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive};
845 
846             \textcolor{comment}{//parsing externalSensorsActive key}
847             \textcolor{keywordflow}{if} (json[\textcolor{stringliteral}{"externalSensorsActive"}].success())
848             \{
849                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{externalSensorsActive} = json[\textcolor{stringliteral}{"externalSensorsActive"}];
850             \}
851             \textcolor{keywordflow}{else}
852             \{
853                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{externalSensorsActive} = \textcolor{keyword}{this} -> 
      \hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{externalSensorsActive};
854             \}
855             json[\textcolor{stringliteral}{"externalSensorsActive"}] = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{externalSensorsActive};
856 
857             
858             \textcolor{comment}{//parsing sleepActive key}
859             \textcolor{keywordflow}{if} (json[\textcolor{stringliteral}{"sleepActive"}].success())
860             \{
861                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a0a51b2287139f66c738101fb53139230}{sleepActive} = json[\textcolor{stringliteral}{"sleepActive"}];
862             \}
863             \textcolor{keywordflow}{else}
864             \{
865                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a0a51b2287139f66c738101fb53139230}{sleepActive} = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a0a51b2287139f66c738101fb53139230}{sleepActive};
866             \}
867             json[\textcolor{stringliteral}{"sleepActive"}] = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a0a51b2287139f66c738101fb53139230}{sleepActive};
868 
869 
870             \textcolor{comment}{//parsing manual key}
871             \textcolor{keywordflow}{if} (json[\textcolor{stringliteral}{"manual"}].success())
872             \{
873                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual} = json[\textcolor{stringliteral}{"manual"}];
874             \}
875             \textcolor{keywordflow}{else}
876             \{
877                 \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual} = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual};
878             \}
879             json[\textcolor{stringliteral}{"manual"}] = \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual};
880 
881 
882 
883             \textcolor{comment}{//saving the current/correct configuration}
884             configFile.close();
885             configFile = SPIFFS.open(\textcolor{stringliteral}{"/coolBoardConfig.json"}, \textcolor{stringliteral}{"w"});
886             \textcolor{keywordflow}{if} (!configFile)
887             \{
888             
889                 Serial.println( F(\textcolor{stringliteral}{"failed to write to /coolBoardConfig.json"}) );
890                 Serial.println();
891 
892                 \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(255,0,0,0.5);\textcolor{comment}{//shade of red     }
893                 \textcolor{keywordflow}{return}(\textcolor{keyword}{false});
894             \}
895 
896             json.printTo(configFile);
897             configFile.close();
898 \textcolor{preprocessor}{            #if DEBUG == 0}
899 
900                 Serial.println( F(\textcolor{stringliteral}{"Configuration loaded : OK"}));
901                 Serial.println();
902 
903 \textcolor{preprocessor}{            #endif}
904 
905             \textcolor{keywordflow}{return}(\textcolor{keyword}{true});
906         \}
907     \}
908 
909     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ad5f0de4c628cbfbf49896042831c64ad}{strobe}(243,171,46,0.5);\textcolor{comment}{//shade of orange}
910     
911     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(243,171,46,0.5);\textcolor{comment}{//shade of orange               }
912 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_a583a874c09c07e70a6eb9229fc4beddb_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_a519de78b807f8ec6463ff484eb925918}\label{class_cool_board_a519de78b807f8ec6463ff484eb925918}} 
\index{Cool\+Board@{Cool\+Board}!connect@{connect}}
\index{connect@{connect}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{connect()}{connect()}}
{\footnotesize\ttfamily int Cool\+Board\+::connect (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_a519de78b807f8ec6463ff484eb925918}{Cool\+Board\+::connect()}\+: This method is provided to manage the network connection and the mqtt connection.

\begin{DoxyReturn}{Returns}
mqtt client state 
\end{DoxyReturn}


Definition at line 246 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
247 \{
248 
249 \textcolor{preprocessor}{#if DEBUG == 1  }
250 
251     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.connect "}) );
252     Serial.println();
253     Serial.println( F(\textcolor{stringliteral}{"Connecting the CoolBoard  "}) );
254     delay(100);
255 
256 \textcolor{preprocessor}{#endif}
257     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a30fadd4cbec17ceea428bf7a32207e87}{write}(0,0,255);\textcolor{comment}{//blue}
258 
259     
260             
261     
262 \textcolor{preprocessor}{#if DEBUG == 1      }
263 
264     Serial.println( F(\textcolor{stringliteral}{"Launching CoolWifi"}) );
265     Serial.println();
266 
267 \textcolor{preprocessor}{#endif}
268     \hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_ad060353050f40d032a2dbf9e54a768bf}{connect}();
269     delay(100);
270 
271 
272     \textcolor{comment}{//only attempt MQTT connection when Wifi is Connected}
273     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a1c7b4d82a4098d346e7593dce92039fa}{state}() == WL\_CONNECTED)
274     \{
275 
276 \textcolor{preprocessor}{    #if DEBUG == 1  }
277     
278         Serial.println( F(\textcolor{stringliteral}{"Launching mqtt.connect()"}) );
279         Serial.println();
280     
281 \textcolor{preprocessor}{    #endif  }
282         \textcolor{comment}{//logInterval in seconds}
283         \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a50075d0ab23a327ab897fd6adad20eda}{connect}(\textcolor{keyword}{this} -> \hyperlink{class_cool_board_a7508e029f2ee17bb747ffab599285e0d}{getLogInterval}()*2);
284         delay(100);
285     \}
286     
287         
288     
289     
290 \textcolor{preprocessor}{#if DEBUG == 1}
291 
292     Serial.println( F(\textcolor{stringliteral}{"mqtt state is :"}) );
293     Serial.println(\hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state}());
294     Serial.println();
295     delay(100);
296 
297 \textcolor{preprocessor}{#endif}
298 
299     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(0,0,255,0.5);\textcolor{comment}{//blue}
300 
301     \textcolor{keywordflow}{return}(\hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state}());
302 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_a519de78b807f8ec6463ff484eb925918_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=341pt]{d7/df9/class_cool_board_a519de78b807f8ec6463ff484eb925918_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_a7508e029f2ee17bb747ffab599285e0d}\label{class_cool_board_a7508e029f2ee17bb747ffab599285e0d}} 
\index{Cool\+Board@{Cool\+Board}!get\+Log\+Interval@{get\+Log\+Interval}}
\index{get\+Log\+Interval@{get\+Log\+Interval}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{get\+Log\+Interval()}{getLogInterval()}}
{\footnotesize\ttfamily unsigned long Cool\+Board\+::get\+Log\+Interval (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_a7508e029f2ee17bb747ffab599285e0d}{Cool\+Board\+::get\+Log\+Interval()}\+: This method is provided to get the log interval

\begin{DoxyReturn}{Returns}
interval value in s 
\end{DoxyReturn}


Definition at line 1151 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
1152 \{
1153 
1154 \textcolor{preprocessor}{#if DEBUG == 1}
1155 
1156     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.getLogInterval() "}) );
1157     Serial.println();
1158     Serial.println( F(\textcolor{stringliteral}{"log Interval is :"}) );
1159     Serial.println(\hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{logInterval});
1160     Serial.println();
1161 
1162 \textcolor{preprocessor}{#endif}
1163 
1164     \textcolor{keywordflow}{return}(\textcolor{keyword}{this} -> \hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{logInterval});
1165 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_a7508e029f2ee17bb747ffab599285e0d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_a397b46fadab8f530a8cf4d914c561366}\label{class_cool_board_a397b46fadab8f530a8cf4d914c561366}} 
\index{Cool\+Board@{Cool\+Board}!init\+Read\+I2C@{init\+Read\+I2C}}
\index{init\+Read\+I2C@{init\+Read\+I2C}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{init\+Read\+I2\+C()}{initReadI2C()}}
{\footnotesize\ttfamily void Cool\+Board\+::init\+Read\+I2C (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_a397b46fadab8f530a8cf4d914c561366}{Cool\+Board\+::init\+Read\+I2\+C()}\+: This method is provided to enable the I2C Interface. 

Definition at line 1246 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
1247 \{
1248 
1249 \textcolor{preprocessor}{#if DEBUG == 1}
1250 
1251     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.initReadI2C()"}) );
1252     Serial.println();
1253 
1254 \textcolor{preprocessor}{#endif}
1255  
1256     digitalWrite(\hyperlink{class_cool_board_af1fe1376fc66f93dee80b327ca695377}{EnI2C},HIGH);\textcolor{comment}{//HIGH= I2C Enable}
1257 
1258 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_a397b46fadab8f530a8cf4d914c561366_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_ad7442cf4b62c7b0d5bd62a0f75ffc065}\label{class_cool_board_ad7442cf4b62c7b0d5bd62a0f75ffc065}} 
\index{Cool\+Board@{Cool\+Board}!is\+Connected@{is\+Connected}}
\index{is\+Connected@{is\+Connected}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{is\+Connected()}{isConnected()}}
{\footnotesize\ttfamily int Cool\+Board\+::is\+Connected (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_ad7442cf4b62c7b0d5bd62a0f75ffc065}{Cool\+Board\+::is\+Connected()}

This method is provided to check if the card is connected to Wifi and M\+Q\+TT

\begin{DoxyReturn}{Returns}
0 \+: connected -\/1\+: Wifi Not Connected -\/2\+: M\+Q\+TT Not Connected 
\end{DoxyReturn}


Definition at line 198 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
199 \{
200 
201 \textcolor{preprocessor}{#if DEBUG == 1  }
202 
203     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.isConnected "}) );
204     Serial.println();
205 
206 \textcolor{preprocessor}{#endif}
207     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a1c7b4d82a4098d346e7593dce92039fa}{state}() != WL\_CONNECTED)
208     \{
209     
210         Serial.println(F(\textcolor{stringliteral}{"Wifi Not Connected"}));
211 
212 \textcolor{preprocessor}{    #if DEBUG == 1}
213 
214         Serial.println(F(\textcolor{stringliteral}{"Wifi State is "}));
215         Serial.println(\hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a1c7b4d82a4098d346e7593dce92039fa}{state}());
216         
217 \textcolor{preprocessor}{    #endif}
218         \textcolor{keywordflow}{return}(-1);
219     \}
220     
221     \textcolor{keywordflow}{if}(\hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state}() != 0)
222     \{
223         
224         Serial.println( F(\textcolor{stringliteral}{"MQTT not Connected"}));
225 
226 \textcolor{preprocessor}{    #if DEBUG==1}
227         Serial.println( F(\textcolor{stringliteral}{"mqtt state is :"}) );
228         Serial.println(\hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state}());  
229     
230 \textcolor{preprocessor}{    #endif}
231 
232     \}
233     
234     \textcolor{keywordflow}{return}(0);
235 
236 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_ad7442cf4b62c7b0d5bd62a0f75ffc065_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_ae6b5e1274d760462290192acea4adca8}\label{class_cool_board_ae6b5e1274d760462290192acea4adca8}} 
\index{Cool\+Board@{Cool\+Board}!off\+Line\+Mode@{off\+Line\+Mode}}
\index{off\+Line\+Mode@{off\+Line\+Mode}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{off\+Line\+Mode()}{offLineMode()}}
{\footnotesize\ttfamily void Cool\+Board\+::off\+Line\+Mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Cool\+Board\+::offline\+Mode()\+: This method is provided to manage the off\+Line mode\+: -\/read sensors -\/do actions -\/save data in the file system -\/if there is Wi\+Fi but no Internet \+: make data available over AP -\/if there is no connection \+: retry to connect 

Definition at line 573 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
574 \{
575     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_af1cacbaa88db8bcf6042c1083ba41155}{fade}(51,100,50,0.5);\textcolor{comment}{//dark shade of green  }
576 \textcolor{preprocessor}{#if DEBUG == 1  }
577     
578     Serial.println( F(\textcolor{stringliteral}{"Entering off line mode "}) ); 
579     
580 \textcolor{preprocessor}{#endif}
581 
582 \textcolor{preprocessor}{#if DEBUG == 0}
583 
584     Serial.println( F(\textcolor{stringliteral}{"CoolBoard is in Offline Mode"}));
585 
586 \textcolor{preprocessor}{#endif}
587 
588     \textcolor{comment}{//read user data if user is active}
589     \textcolor{keywordflow}{if}(\hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{userActive})
590     \{
591 
592         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(245,237,27,0.5);\textcolor{comment}{//shade of yellow}
593 
594 \textcolor{preprocessor}{    #if DEBUG == 1}
595         
596         Serial.println( F(\textcolor{stringliteral}{"User is Active"}) );
597         Serial.println( F(\textcolor{stringliteral}{"Collecting User's data ( mac,username,timeStamp )"}) );
598         Serial.println();
599 
600 \textcolor{preprocessor}{    #endif}
601 
602         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(245,237,27,0.5);\textcolor{comment}{//shade of yellow   }
603 
604         \textcolor{comment}{//reading user data}
605         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}=this->\hyperlink{class_cool_board_ae7358fb6e623cfc81b775f5f1734909b}{userData}();\textcolor{comment}{//\{"":"","":"","",""\}}
606 
607         \textcolor{comment}{//formatting json }
608         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.setCharAt( \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.lastIndexOf(\textcolor{charliteral}{'\}'}) , \textcolor{charliteral}{','});\textcolor{comment}{//\{"":"","":"","","",}
609         
610                 
611         \textcolor{comment}{//read sensors data}
612 
613         Serial.println( F(\textcolor{stringliteral}{"Collecting sensors data "}) );
614         Serial.println();
615 
616         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}+=this->\hyperlink{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}{readSensors}();\textcolor{comment}{//\{"":"","":"","","",\{.......\}}
617 
618         
619 
620         \textcolor{comment}{//formatting json correctly}
621         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.remove(\hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.lastIndexOf(\textcolor{charliteral}{'\{'}), 1);\textcolor{comment}{//\{"":"","":"","","",.......\}}
622 
623         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(245,237,27,0.5);\textcolor{comment}{//shade of yellow}
624                 
625     \}   
626     \textcolor{keywordflow}{else}
627     \{
628         \textcolor{comment}{//read sensors data}
629 \textcolor{preprocessor}{    #if DEBUG == 1}
630 
631         Serial.println( F(\textcolor{stringliteral}{"Collecting sensors data "}) );
632         Serial.println();
633 
634 \textcolor{preprocessor}{    #endif}
635 
636         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_af1cacbaa88db8bcf6042c1083ba41155}{fade}(190,100,150,0.5);\textcolor{comment}{//shade of violet        }
637 
638         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}=this->\hyperlink{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}{readSensors}();\textcolor{comment}{//\{..,..,..\}}
639     \}
640 
641     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_af1cacbaa88db8bcf6042c1083ba41155}{fade}(51,100,50,0.5);\textcolor{comment}{//dark shade of green  }
642 
643     \textcolor{comment}{//do action}
644 
645     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive})
646     \{
647     
648 
649 
650 \textcolor{preprocessor}{    #if DEBUG == 1}
651 
652         Serial.println( F(\textcolor{stringliteral}{"jetpack is Active "}) );
653         Serial.println( F(\textcolor{stringliteral}{"jetpack doing action "}) );
654         Serial.println();
655     
656 \textcolor{preprocessor}{    #endif}
657         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_af1cacbaa88db8bcf6042c1083ba41155}{fade}(100,100,150,0.5);\textcolor{comment}{//dark shade of blue }
658     
659         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a9e703197093094b963f9ad57817495b8}{doAction}( \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.c\_str() );
660     \}
661     
662     delay(100);
663 
664     \hyperlink{class_cool_board_a4ac693895c21025b8808653f2a4316e6}{onBoardActor}.\hyperlink{class_cool_board_actor_a96a45658d32c6b95caa2f385c7da32cd}{doAction}( \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.c\_str() );  
665 
666 
667     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_af1cacbaa88db8bcf6042c1083ba41155}{fade}(51,100,50,0.5);\textcolor{comment}{//dark shade of green  }
668     
669     \textcolor{comment}{//saving data in the file system}
670     
671     \hyperlink{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}{fileSystem}.\hyperlink{class_cool_file_system_afa3a4feae94871d4d3b6bebb701c2e67}{saveSensorData}( \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.c\_str() );
672 
673 \textcolor{preprocessor}{    #if DEBUG == 0}
674 
675         Serial.println( F(\textcolor{stringliteral}{"saving Data in Memory : OK"}));
676 
677 \textcolor{preprocessor}{    #endif}
678 
679     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(51,100,50,0.5);\textcolor{comment}{//dark shade of green}
680 
681     \textcolor{comment}{//case we have wifi but no internet}
682     \textcolor{keywordflow}{if}( (\hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a1c7b4d82a4098d346e7593dce92039fa}{state}() == WL\_CONNECTED) && ( \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.
      \hyperlink{class_cool_m_q_t_t_a5d003307eff78efbd585e42b43b72b6d}{state}()!=0 ) )
683     \{
684         
685         Serial.println(F(\textcolor{stringliteral}{"there is Wifi but no Internet"}));
686         Serial.println(F(\textcolor{stringliteral}{"lunching AP to check saved files"}));
687         Serial.println(F(\textcolor{stringliteral}{"and Add new WiFi if needed"}));
688         
689         \hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a7c857f27161782f5ef1d62d552aff971}{connectAP}();
690         
691     \}
692     
693     \textcolor{comment}{//case we have no connection at all}
694     \textcolor{keywordflow}{if}( \hyperlink{class_cool_board_acd88e6003606b47479ebba81e4aceeca}{wifiManager}.\hyperlink{class_cool_wifi_a1c7b4d82a4098d346e7593dce92039fa}{state}() != WL\_CONNECTED )
695     \{
696     
697 \textcolor{preprocessor}{    #if DEBUG == 1}
698         
699         Serial.println(F(\textcolor{stringliteral}{"there is No Wifi "}));
700         Serial.println(F(\textcolor{stringliteral}{"retrying to connect"}));
701     
702 \textcolor{preprocessor}{    #endif}
703 
704 \textcolor{preprocessor}{    #if DEBUG == 0}
705         Serial.println( F(\textcolor{stringliteral}{"there is no WiFi..."}));
706 \textcolor{preprocessor}{    #endif}
707         
708         this->\hyperlink{class_cool_board_a519de78b807f8ec6463ff484eb925918}{connect}();\textcolor{comment}{//nomad case : just run wifiMulti}
709                 \textcolor{comment}{//normal case : run wifiMulti+AP}
710         
711     \}   
712 
713 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d7/df9/class_cool_board_ae6b5e1274d760462290192acea4adca8_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_aa0bbc4bc605e35618d18e68795c61363}\label{class_cool_board_aa0bbc4bc605e35618d18e68795c61363}} 
\index{Cool\+Board@{Cool\+Board}!on\+Line\+Mode@{on\+Line\+Mode}}
\index{on\+Line\+Mode@{on\+Line\+Mode}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{on\+Line\+Mode()}{onLineMode()}}
{\footnotesize\ttfamily void Cool\+Board\+::on\+Line\+Mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_aa0bbc4bc605e35618d18e68795c61363}{Cool\+Board\+::on\+Line\+Mode()}\+: This method is provided to manage the online mode\+: -\/update clock -\/read sensor -\/do actions -\/publish data -\/read answer -\/update config 

Definition at line 314 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
315 \{
316 
317     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(128,255,50,0.5);\textcolor{comment}{//shade of green}
318 
319 \textcolor{preprocessor}{#if DEBUG == 1}
320 
321     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.onLineMode() "}) );
322     Serial.println();
323 
324 \textcolor{preprocessor}{#endif}
325 \textcolor{preprocessor}{#if DEBUG == 0}
326 
327     Serial.println( F(\textcolor{stringliteral}{"CoolBoard is in Online Mode"}));
328 
329 \textcolor{preprocessor}{#endif}
330 
331     \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}=\textcolor{stringliteral}{""};
332     \hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer}=\textcolor{stringliteral}{""};
333 
334     \textcolor{comment}{//send saved data if any}
335     \textcolor{keywordflow}{if}(\hyperlink{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}{fileSystem}.\hyperlink{class_cool_file_system_ac86a40e7c3a1842f7342f698d34324f9}{isDataSaved}())
336     \{
337 
338         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(128,128,255,0.5);\textcolor{comment}{//shade of blue}
339 
340         Serial.println( F(\textcolor{stringliteral}{"There is data saved on the File System"}) );
341         Serial.println( F(\textcolor{stringliteral}{"Sending saved data over MQTT "}) );
342         Serial.println();
343         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ad5f0de4c628cbfbf49896042831c64ad}{strobe}(128,128,255,0.5);\textcolor{comment}{//shade of blue }
344 
345         \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish}(\textcolor{stringliteral}{"sending saved data"});
346         \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
347 
348 
349         
350         \textcolor{keywordtype}{int} size=0;
351         std::unique\_ptr<String[]> savedData(std::move(\hyperlink{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}{fileSystem}.
      \hyperlink{class_cool_file_system_a3223ffff4266a6300988fab956d6b4b2}{getSensorSavedData}(size)));\textcolor{comment}{//\{..,..,..\}}
352 
353         \textcolor{keywordtype}{int} i=0;
354         \textcolor{comment}{//loop through the array}
355         \textcolor{keywordflow}{while}(i<size)
356         \{
357             \textcolor{comment}{//formatting data:}
358         
359             String jsonData = \textcolor{stringliteral}{"\{\(\backslash\)"state\(\backslash\)":\{\(\backslash\)"reported\(\backslash\)":"};
360             jsonData += savedData[i]; \textcolor{comment}{// \{"state":\{"reported":\{..,..,..,..,..,..,..,..\}}
361             jsonData += \textcolor{stringliteral}{" \} \}"}; \textcolor{comment}{// \{"state":\{"reported":\{..,..,..,..,..,..,..,..\}  \} \}}
362 
363 \textcolor{preprocessor}{        #if DEBUG == 1 }
364             Serial.println(F(\textcolor{stringliteral}{"Size is : "}));
365             Serial.println(size);
366             Serial.print(F(\textcolor{stringliteral}{"sending line NÂ°"}));
367             Serial.println(i);
368             Serial.println(jsonData);
369             Serial.println();
370 
371 \textcolor{preprocessor}{        #endif}
372 
373             \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ad5f0de4c628cbfbf49896042831c64ad}{strobe}(128,128,255,0.5);\textcolor{comment}{//shade of blue}
374         
375             \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish}( jsonData.c\_str() );
376             \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
377         
378             \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(128,128,255,0.5);\textcolor{comment}{//shade of blue}
379             
380             i++;
381             yield();
382         \}       
383 
384 
385 \textcolor{preprocessor}{    #if DEBUG == 1}
386 
387         Serial.println( F(\textcolor{stringliteral}{"Saved data sent "}) );
388         Serial.println();
389     
390 \textcolor{preprocessor}{    #endif}
391 
392     \}
393 
394     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(128,255,50,0.5);\textcolor{comment}{//shade of green}
395 
396     \textcolor{comment}{//clock update}
397     Serial.println( F(\textcolor{stringliteral}{"Re-checking RTC..."}));
398     \hyperlink{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}{rtc}.\hyperlink{class_cool_time_aae601f795452cfa48d9fb337aed483a8}{update}();
399 
400     \textcolor{comment}{//read user data if user is active}
401     \textcolor{keywordflow}{if}(\hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{userActive})
402     \{
403         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(245,237,27,0.5);\textcolor{comment}{//shade of yellow}
404     
405 \textcolor{preprocessor}{    #if DEBUG == 1}
406 
407         Serial.println( F(\textcolor{stringliteral}{"User is Active"}) );
408         Serial.println( F(\textcolor{stringliteral}{"Collecting User's data ( mac,username,timeStamp )"}) );
409         Serial.println();
410     
411 \textcolor{preprocessor}{    #endif  }
412         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(245,237,27,0.5);\textcolor{comment}{//shade of yellow   }
413 
414         \textcolor{comment}{//reading user data}
415         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}=this->\hyperlink{class_cool_board_ae7358fb6e623cfc81b775f5f1734909b}{userData}();\textcolor{comment}{//\{"":"","":"","",""\}}
416 
417         \textcolor{comment}{//formatting json }
418         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.setCharAt( \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.lastIndexOf(\textcolor{charliteral}{'\}'}) , \textcolor{charliteral}{','});\textcolor{comment}{//\{"":"","":"","","",}
419                 
420         \textcolor{comment}{//read sensors data}
421 \textcolor{preprocessor}{    #if DEBUG == 1}
422 
423         Serial.println( F(\textcolor{stringliteral}{"Collecting sensors data "}) );
424         Serial.println();
425     
426 \textcolor{preprocessor}{    #endif}
427 
428         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}+=this->\hyperlink{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}{readSensors}();\textcolor{comment}{//\{"":"","":"","","",\{.......\}     }
429 
430         \textcolor{comment}{//formatting json correctly}
431         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.remove(\hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.lastIndexOf(\textcolor{charliteral}{'\{'}), 1);\textcolor{comment}{//\{"":"","":"","","",.......\}}
432         
433         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(245,237,27,0.5);\textcolor{comment}{//shade of yellow}
434                 
435     \}   
436     \textcolor{keywordflow}{else}
437     \{
438         \textcolor{comment}{//read sensors data}
439 \textcolor{preprocessor}{    #if DEBUG == 1}
440 
441         Serial.println( F(\textcolor{stringliteral}{"Collecting sensors data "}) );
442         Serial.println();
443     
444 \textcolor{preprocessor}{    #endif}
445         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_af1cacbaa88db8bcf6042c1083ba41155}{fade}(190,100,150,0.5);\textcolor{comment}{//shade of violet        }
446         \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}=this->\hyperlink{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}{readSensors}();\textcolor{comment}{//\{..,..,..\}}
447     \}
448     
449 
450 
451 
452     \textcolor{comment}{//do action}
453 
454     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive})
455     \{
456 
457 
458 \textcolor{preprocessor}{    #if DEBUG ==1}
459 
460         Serial.println( F(\textcolor{stringliteral}{"jetpack is Active "}) );
461         Serial.println();
462 
463 \textcolor{preprocessor}{    #endif}
464     
465         \textcolor{keywordflow}{if}(this->\hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual} == 0 )
466         \{
467 
468             Serial.println( F(\textcolor{stringliteral}{"jetpack doing action "}) );
469 
470             \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_af1cacbaa88db8bcf6042c1083ba41155}{fade}(100,100,150,0.5);\textcolor{comment}{//dark shade of blue     }
471 
472             \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a9e703197093094b963f9ad57817495b8}{doAction}(\hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.c\_str());
473             
474 
475         
476         \}
477         
478         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(this->\hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual} == 1 )
479         \{
480         
481             Serial.println(F(\textcolor{stringliteral}{"we are in manual mode"}));
482             \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
483             \hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer} = \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}{read}();
484             \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a8612756d3f73198cdde857a66f0fe690}{update}(\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer}.c\_str());
485         \}
486     \}
487 
488     delay(100);
489 
490     \hyperlink{class_cool_board_a4ac693895c21025b8808653f2a4316e6}{onBoardActor}.\hyperlink{class_cool_board_actor_a96a45658d32c6b95caa2f385c7da32cd}{doAction}( \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}.c\_str() );  
491 
492 
493 
494     
495     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(128,255,50,0.5);\textcolor{comment}{//shade of green}
496 
497     \textcolor{comment}{//formatting data:}
498     String jsonData = \textcolor{stringliteral}{"\{\(\backslash\)"state\(\backslash\)":\{\(\backslash\)"reported\(\backslash\)":"};
499     jsonData += \hyperlink{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}{data}; \textcolor{comment}{// \{"state":\{"reported":\{..,..,..,..,..,..,..,..\}}
500     jsonData += \textcolor{stringliteral}{" \} \}"}; \textcolor{comment}{// \{"state":\{"reported":\{..,..,..,..,..,..,..,..\}  \} \}}
501     
502     \textcolor{comment}{//mqtt client loop to allow data handling}
503     \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
504 
505     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(128,255,50,0.5);\textcolor{comment}{//shade of green    }
506 
507     \textcolor{comment}{//read mqtt answer}
508     \hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer} = \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}{read}();
509 
510 \textcolor{preprocessor}{#if DEBUG == 1 }
511 
512     Serial.println( F(\textcolor{stringliteral}{"checking if there's an MQTT message "})  );
513     Serial.println( F(\textcolor{stringliteral}{"answer is : "}) );    
514     Serial.println(\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer});   
515     Serial.println();
516 
517 \textcolor{preprocessor}{#endif  }
518 
519     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(128,255,50,0.5);\textcolor{comment}{//shade of green    }
520 
521     \textcolor{comment}{//check if the configuration needs update }
522     \textcolor{comment}{//and update it if needed }
523     \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a8612756d3f73198cdde857a66f0fe690}{update}(\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer}.c\_str());
524     
525     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(128,255,50,0.5);\textcolor{comment}{//shade of green  }
526 
527     \textcolor{comment}{//publishing data   }
528     \textcolor{keywordflow}{if}( this->\hyperlink{class_cool_board_a0a51b2287139f66c738101fb53139230}{sleepActive}==0 )   
529     \{   
530         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ad5f0de4c628cbfbf49896042831c64ad}{strobe}(255,0,230,0.5);\textcolor{comment}{//shade of pink}
531         
532         \textcolor{comment}{//logInterval in seconds}
533         \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish}( jsonData.c\_str(), this->\hyperlink{class_cool_board_a7508e029f2ee17bb747ffab599285e0d}{getLogInterval}() );
534         \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
535     
536     \}
537     \textcolor{keywordflow}{else}
538     \{
539         \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ad5f0de4c628cbfbf49896042831c64ad}{strobe}(230,255,0,0.5);\textcolor{comment}{//shade of yellow  }
540 
541         \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish}(jsonData.c\_str());      
542         \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
543         \hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer} = \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}{read}();
544         \textcolor{keyword}{this} ->update(\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer}.c\_str());
545 
546         \textcolor{comment}{//logInterval in seconds}
547         this->\hyperlink{class_cool_board_a069952cdcb2e7f68518aa429eceadb6e}{sleep}( this->\hyperlink{class_cool_board_a7508e029f2ee17bb747ffab599285e0d}{getLogInterval}() ) ;
548     \}
549 
550     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(128,255,50,0.5);\textcolor{comment}{//shade of green        }
551 
552     \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
553 
554     \textcolor{comment}{//read mqtt answer}
555     \hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer} = \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ae3c18f6ae9723746d32765f1c8f176ca}{read}();
556     \textcolor{keyword}{this} -> \hyperlink{class_cool_board_a8612756d3f73198cdde857a66f0fe690}{update}(\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer}.c\_str()); 
557 
558     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a96e1ea13003eee34c9dbcef340404426}{blink}(128,255,50,0.5);\textcolor{comment}{//shade of green    }
559 
560 
561 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d7/df9/class_cool_board_aa0bbc4bc605e35618d18e68795c61363_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_a486507b8f0981d3cc671ed31c2145755}\label{class_cool_board_a486507b8f0981d3cc671ed31c2145755}} 
\index{Cool\+Board@{Cool\+Board}!print\+Conf@{print\+Conf}}
\index{print\+Conf@{print\+Conf}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{print\+Conf()}{printConf()}}
{\footnotesize\ttfamily void Cool\+Board\+::print\+Conf (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_a486507b8f0981d3cc671ed31c2145755}{Cool\+Board\+::print\+Conf()}\+: This method is provided to print the configuration to the Serial Monitor. 

Definition at line 921 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
922 \{
923 
924 \textcolor{preprocessor}{#if DEBUG == 1}
925     
926     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.printConf() "}) );
927     Serial.println();
928 
929 \textcolor{preprocessor}{#endif}
930 
931     Serial.println( F(\textcolor{stringliteral}{"Printing Cool Board Configuration "}));
932     Serial.print( F(\textcolor{stringliteral}{"log interval       : "}));
933     Serial.println(this->\hyperlink{class_cool_board_a84bc94413b64973e4aba8c467c97006c}{logInterval});
934 
935     Serial.print( F(\textcolor{stringliteral}{"irene active       : "}));
936     Serial.println(this->\hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{ireneActive});
937 
938     Serial.print( F(\textcolor{stringliteral}{"jetpack active     : "}));
939     Serial.println(this->\hyperlink{class_cool_board_a9be03a913d26e558328935ca3b59a75e}{jetpackActive});
940 
941     Serial.print( F(\textcolor{stringliteral}{"external sensors active    : "}));
942     Serial.println(this->\hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{externalSensorsActive});
943 
944     Serial.print( F(\textcolor{stringliteral}{"sleep active       : "}));
945     Serial.println(this->\hyperlink{class_cool_board_a0a51b2287139f66c738101fb53139230}{sleepActive});
946 
947     Serial.print( F(\textcolor{stringliteral}{"user active        : "}));
948     Serial.println(this->\hyperlink{class_cool_board_a6395459131d6889a3005f79c7a35e964}{userActive});
949 
950     Serial.print( F(\textcolor{stringliteral}{"manual active      : "}));
951     Serial.println(this->\hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual});
952 
953     Serial.println();
954 
955 
956 
957 
958 \}
\end{DoxyCode}
\mbox{\Hypertarget{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}\label{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}} 
\index{Cool\+Board@{Cool\+Board}!read\+Sensors@{read\+Sensors}}
\index{read\+Sensors@{read\+Sensors}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{read\+Sensors()}{readSensors()}}
{\footnotesize\ttfamily String Cool\+Board\+::read\+Sensors (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf}{Cool\+Board\+::read\+Sensors()}\+: This method is provided to read and format all the sensors data in a single json.

\begin{DoxyReturn}{Returns}
json string of all the sensors read. 
\end{DoxyReturn}


Definition at line 1175 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
1176 \{
1177 
1178     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(128,255,0,0.5);\textcolor{comment}{//light shade of green}
1179                 
1180 \textcolor{preprocessor}{#if DEBUG == 1}
1181 
1182     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.readSensors()"}) );
1183     Serial.println();
1184 
1185 \textcolor{preprocessor}{#endif}
1186     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ad5f0de4c628cbfbf49896042831c64ad}{strobe}(128,255,0,0.5);\textcolor{comment}{//light shade of green}
1187 
1188     String sensorsData;
1189     
1190     this->\hyperlink{class_cool_board_a397b46fadab8f530a8cf4d914c561366}{initReadI2C}();
1191 
1192     sensorsData = \hyperlink{class_cool_board_af102be5288bd7f7a8e59b13f86e26a00}{coolBoardSensors}.\hyperlink{class_cool_board_sensors_a91badb2539d91fda8679f2a597874c48}{read}(); \textcolor{comment}{// \{..,..,..\}}
1193     
1194     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}{externalSensorsActive})
1195     \{
1196         sensorsData += \hyperlink{class_cool_board_a09e26264839c65873eb56af476eff6b2}{externalSensors}.\hyperlink{class_external_sensors_a53177b81eca3be89508b5511ddcd00fc}{read}(); \textcolor{comment}{// \{..,..,..\}\{..,..\}}
1197 
1198         sensorsData.setCharAt(sensorsData.lastIndexOf(\textcolor{charliteral}{'\}'}), \textcolor{charliteral}{','}); \textcolor{comment}{// \{..,..,..\}\{..,..,}
1199         sensorsData.setCharAt(sensorsData.lastIndexOf(\textcolor{charliteral}{'\{'}), \textcolor{charliteral}{','}); \textcolor{comment}{// \{..,..,..\},..,..,}
1200         sensorsData.remove(sensorsData.lastIndexOf(\textcolor{charliteral}{'\}'}), 1); \textcolor{comment}{// \{..,..,..,..,..,}
1201         sensorsData.setCharAt(sensorsData.lastIndexOf(\textcolor{charliteral}{','}), \textcolor{charliteral}{'\}'}); \textcolor{comment}{// \{..,..,..,..,..\}}
1202 
1203     \}
1204     \textcolor{keywordflow}{if} (\hyperlink{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}{ireneActive})
1205     \{
1206         sensorsData += \hyperlink{class_cool_board_ad103718ce316006c4695b8eb312eaf11}{irene3000}.\hyperlink{class_irene3000_a852a170feea994ea1df01c6b245b5d9a}{read}(); \textcolor{comment}{// \{..,..,..,..,..\}\{..,..,..\}}
1207 
1208         sensorsData.setCharAt(sensorsData.lastIndexOf(\textcolor{charliteral}{'\}'}), \textcolor{charliteral}{','}); \textcolor{comment}{// \{..,..,..,..,..\}\{..,..,..,}
1209         sensorsData.setCharAt(sensorsData.lastIndexOf(\textcolor{charliteral}{'\{'}), \textcolor{charliteral}{','}); \textcolor{comment}{// \{..,..,..,..,..\},..,..,..,}
1210         sensorsData.remove(sensorsData.lastIndexOf(\textcolor{charliteral}{'\}'}), 1); \textcolor{comment}{// \{..,..,..,..,..,..,..,..,}
1211         sensorsData.setCharAt(sensorsData.lastIndexOf(\textcolor{charliteral}{','}), \textcolor{charliteral}{'\}'}); \textcolor{comment}{// \{..,..,..,..,..,..,..,..\}      }
1212         
1213         
1214     \}
1215 
1216     \textcolor{comment}{//getting Hour:}
1217     tmElements\_t tm;
1218     tm=\hyperlink{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}{rtc}.\hyperlink{class_cool_time_a7a7501c5ca77dd1248bea704c44f986c}{getTimeDate}();
1219     
1220     \textcolor{comment}{//adding Hour}
1221     sensorsData.remove(sensorsData.lastIndexOf(\textcolor{charliteral}{'\}'}), 1); \textcolor{comment}{// \{..,..,..,..,..,..,..,..,   }
1222     sensorsData+=\textcolor{stringliteral}{",\(\backslash\)"hour\(\backslash\)":"};  
1223     sensorsData+=tm.Hour;
1224     sensorsData+=\textcolor{stringliteral}{",\(\backslash\)"minute\(\backslash\)":"};
1225     sensorsData+=tm.Minute;
1226     sensorsData+=\textcolor{stringliteral}{"\}"};
1227     
1228 \textcolor{preprocessor}{#if DEBUG == 1}
1229     Serial.println();
1230     Serial.println( F(\textcolor{stringliteral}{"sensors data is "}) );
1231     Serial.println(sensorsData);
1232     Serial.println();
1233 
1234 \textcolor{preprocessor}{#endif}
1235     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(128,255,0,0.5);\textcolor{comment}{//light shade of green}
1236 
1237     \textcolor{keywordflow}{return}(sensorsData);
1238 
1239 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_ad03abdce2e65f520bbf2cff0f2d083cf_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_a069952cdcb2e7f68518aa429eceadb6e}\label{class_cool_board_a069952cdcb2e7f68518aa429eceadb6e}} 
\index{Cool\+Board@{Cool\+Board}!sleep@{sleep}}
\index{sleep@{sleep}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{sleep()}{sleep()}}
{\footnotesize\ttfamily void Cool\+Board\+::sleep (\begin{DoxyParamCaption}\item[{unsigned long}]{interval }\end{DoxyParamCaption})}

Cool\+Board\+::sleep(int interval)\+: This method is provided to allow the board to enter deep\+Sleep mode for a period of time equal to interval in s 

Definition at line 1315 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
1316 \{
1317 
1318     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.sleep() "}) );
1319     Serial.print( F(\textcolor{stringliteral}{"going to sleep for "}) );
1320     Serial.print(interval);
1321     Serial.println(F(\textcolor{stringliteral}{"s"}) );
1322     Serial.println();
1323     
1324     \textcolor{comment}{//interval is in seconds , interval*1000*1000 in ÂµS}
1325     ESP.deepSleep ( ( interval * 1000 * 1000 ), WAKE\_RF\_DEFAULT) ;
1326 
1327 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=329pt]{d7/df9/class_cool_board_a069952cdcb2e7f68518aa429eceadb6e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_a8612756d3f73198cdde857a66f0fe690}\label{class_cool_board_a8612756d3f73198cdde857a66f0fe690}} 
\index{Cool\+Board@{Cool\+Board}!update@{update}}
\index{update@{update}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily void Cool\+Board\+::update (\begin{DoxyParamCaption}\item[{const char $\ast$}]{answer }\end{DoxyParamCaption})}

Cool\+Board\+::update(mqtt answer)\+: This method is provided to handle the configuration update of the different parts 

Definition at line 965 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
966 \{
967     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ab778f5e7bed0ab74e3906d82110493c3}{fadeIn}(153,76,0,0.5);\textcolor{comment}{//shade of brown        }
968 
969 \textcolor{preprocessor}{#if DEBUG == 1}
970 
971     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.update() "}) );
972     Serial.println();
973     Serial.println( F(\textcolor{stringliteral}{"message is : "}) );
974     Serial.println(\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer});
975     Serial.println();
976 
977 \textcolor{preprocessor}{#endif}
978 
979     DynamicJsonBuffer jsonBuffer;
980     JsonObject & root = jsonBuffer.parseObject(\hyperlink{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}{answer});
981     JsonObject & stateDesired = root[\textcolor{stringliteral}{"state"}];
982 
983 \textcolor{preprocessor}{#if DEBUG == 1}
984 
985     Serial.println( F(\textcolor{stringliteral}{"root json : "}) );
986     root.printTo(Serial);
987     Serial.println();
988 
989     Serial.println( F(\textcolor{stringliteral}{"stateDesired json : "}));
990     stateDesired.printTo(Serial);
991     Serial.println();
992     
993     Serial.print( F(\textcolor{stringliteral}{"jsonBuffer size : "}));
994     Serial.println(jsonBuffer.size());
995 
996 \textcolor{preprocessor}{#endif}
997 
998     \textcolor{keywordflow}{if} (stateDesired.success())
999     \{
1000     
1001 \textcolor{preprocessor}{    #if DEBUG == 1}
1002 
1003         Serial.println( F(\textcolor{stringliteral}{"update message parsing : success"}) );
1004         Serial.println();
1005     
1006 \textcolor{preprocessor}{    #endif}
1007 
1008             String answerDesired;
1009         
1010             stateDesired.printTo(answerDesired);
1011             
1012 \textcolor{preprocessor}{        #if DEBUG == 1      }
1013         
1014             Serial.println( F(\textcolor{stringliteral}{"update is ok "}) );
1015             Serial.println( F(\textcolor{stringliteral}{"desired update is : "}) );            
1016             Serial.println(answerDesired);
1017             Serial.println(\textcolor{stringliteral}{"json size is : "});
1018             Serial.println(jsonBuffer.size() ) ;                
1019             Serial.println();
1020 
1021         
1022 \textcolor{preprocessor}{        #endif}
1023             \textcolor{comment}{//manual mode check}
1024             \textcolor{keywordflow}{if}(this->\hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual} == 1 )
1025             \{ 
1026                 JsonObject & manualMode=stateDesired[\textcolor{stringliteral}{"manual"}];
1027                 \textcolor{comment}{//json parse}
1028                 \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} kv : manualMode)
1029                 \{
1030 \textcolor{preprocessor}{                #if DEBUG == 1}
1031 
1032                     Serial.print(F(\textcolor{stringliteral}{"writing to "}));
1033                     Serial.println(kv.key);
1034                     Serial.print(F(\textcolor{stringliteral}{"state : "}));
1035                     Serial.println(kv.value.as<\textcolor{keywordtype}{bool}>());        
1036                     
1037 \textcolor{preprocessor}{                #endif              }
1038 
1039                     \textcolor{keywordflow}{if}( strcmp(kv.key,\textcolor{stringliteral}{"Act0"}) == 0 )
1040                     \{
1041                     
1042                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(0,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1043                         
1044                     \}
1045                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(kv.key,\textcolor{stringliteral}{"Act1"}) == 0)
1046                     \{
1047                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(1,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1048 
1049                     \}
1050                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(kv.key,\textcolor{stringliteral}{"Act2"}) == 0)
1051                     \{
1052                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(2,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1053 
1054                     \}
1055                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(kv.key,\textcolor{stringliteral}{"Act3"}) == 0)
1056                     \{
1057                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(3,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1058 
1059                     \}
1060                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(kv.key,\textcolor{stringliteral}{"Act4"}) == 0)
1061                     \{
1062                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(4,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1063 
1064                     \}
1065                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(kv.key,\textcolor{stringliteral}{"Act5"}) == 0)
1066                     \{
1067                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(5,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1068 
1069                     \}
1070                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcmp(kv.key,\textcolor{stringliteral}{"Act6"}) == 0)
1071                     \{
1072                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(6,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1073 
1074                     \}
1075                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strcmp(kv.key,\textcolor{stringliteral}{"Act7"}) == 0)
1076                     \{
1077                         \hyperlink{class_cool_board_a30b1357881b01ccbec676856a91e48e9}{jetPack}.\hyperlink{class_jetpack_a79ae7bc3c1828a0551a7c005c4f8bd00}{writeBit}(7,kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1078 
1079                     \}
1080                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strcmp(kv.key,\textcolor{stringliteral}{"ActB"}) == 0)
1081                     \{
1082                         \hyperlink{class_cool_board_a4ac693895c21025b8808653f2a4316e6}{onBoardActor}.\hyperlink{class_cool_board_actor_a958786ff01ea1056ee72c72d439f86da}{write}(kv.value.as<\textcolor{keywordtype}{bool}>() ); 
1083 
1084                     \}
1085                                 
1086                 
1087                 \}
1088 
1089                 
1090             \}
1091 
1092             \textcolor{comment}{//saving the new configuration}
1093             \hyperlink{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}{fileSystem}.\hyperlink{class_cool_file_system_adfa8e2e80641ae6f0cceabd348a9b841}{updateConfigFiles}(answerDesired);
1094 
1095                 \textcolor{comment}{//answering the update msg:}
1096             \textcolor{comment}{//reported = received configuration}
1097             \textcolor{comment}{//desired=null}
1098         
1099             String updateAnswer;
1100             String tempString;
1101             
1102             stateDesired.printTo(tempString);
1103             updateAnswer=\textcolor{stringliteral}{"\{\(\backslash\)"state\(\backslash\)":\{\(\backslash\)"reported\(\backslash\)":"};
1104             updateAnswer+=tempString;
1105             updateAnswer+=\textcolor{stringliteral}{",\(\backslash\)"desired\(\backslash\)":null\}\}"};
1106 
1107 \textcolor{preprocessor}{        #if DEBUG == 1}
1108 
1109             Serial.println( F(\textcolor{stringliteral}{"preparing answer message "}) );
1110             Serial.println();
1111             Serial.println( F(\textcolor{stringliteral}{"updateAnswer : "}) );
1112             Serial.println(updateAnswer);
1113         
1114 \textcolor{preprocessor}{        #endif  }
1115 
1116             \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_ace977b3e90ab14b1199fe5c4fb0a13ec}{publish}(updateAnswer.c\_str());
1117             
1118             \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_aa5eaae967b562b62cbcf2b8d81f6e5d5}{mqttLoop}();
1119 
1120             delay(10);
1121         
1122             \textcolor{keywordflow}{if}(\hyperlink{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}{manual} == 0 )
1123             \{
1124                 \textcolor{comment}{//restart the esp to apply the config}
1125                 ESP.restart();
1126             \}
1127     \}
1128     \textcolor{keywordflow}{else}
1129     \{
1130     
1131 \textcolor{preprocessor}{    #if DEBUG == 1}
1132 
1133         Serial.println( F(\textcolor{stringliteral}{"Failed to parse update message( OR no message received )"}) );
1134         Serial.println();
1135     
1136 \textcolor{preprocessor}{    #endif}
1137     
1138     \}
1139 
1140     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_ad5f0de4c628cbfbf49896042831c64ad}{strobe}(153,76,0,0.5);\textcolor{comment}{//shade of brown}
1141     \hyperlink{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}{coolBoardLed}.\hyperlink{class_cool_board_led_a93d545679237e8cc858324367149775c}{fadeOut}(153,76,0,0.5);\textcolor{comment}{//shade of brown                              }
1142 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_a8612756d3f73198cdde857a66f0fe690_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=335pt]{d7/df9/class_cool_board_a8612756d3f73198cdde857a66f0fe690_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_cool_board_ae7358fb6e623cfc81b775f5f1734909b}\label{class_cool_board_ae7358fb6e623cfc81b775f5f1734909b}} 
\index{Cool\+Board@{Cool\+Board}!user\+Data@{user\+Data}}
\index{user\+Data@{user\+Data}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{user\+Data()}{userData()}}
{\footnotesize\ttfamily String Cool\+Board\+::user\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\hyperlink{class_cool_board_ae7358fb6e623cfc81b775f5f1734909b}{Cool\+Board\+::user\+Data()}\+: This method is provided to return the user\textquotesingle{}s data.

\begin{DoxyReturn}{Returns}
json string of the user\textquotesingle{}s data 
\end{DoxyReturn}


Definition at line 1268 of file Cool\+Board.\+cpp.


\begin{DoxyCode}
1269 \{
1270 
1271 \textcolor{preprocessor}{#if DEBUG == 1}
1272 
1273     Serial.println( F(\textcolor{stringliteral}{"Entering CoolBoard.userData() "}) );
1274     Serial.println();
1275 
1276 \textcolor{preprocessor}{#endif}
1277 
1278     String tempMAC = WiFi.macAddress();
1279 
1280     tempMAC.replace(\textcolor{stringliteral}{":"}, \textcolor{stringliteral}{""});
1281 
1282     String userJson = \textcolor{stringliteral}{"\{\(\backslash\)"user\(\backslash\)":\(\backslash\)""};
1283 
1284     userJson += \hyperlink{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}{mqtt}.\hyperlink{class_cool_m_q_t_t_a373cc92fca7760d886f02d8a6e5b3f63}{getUser}();
1285 
1286     userJson += \textcolor{stringliteral}{"\(\backslash\)",\(\backslash\)"timestamp\(\backslash\)":\(\backslash\)""};
1287 
1288     userJson += \hyperlink{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}{rtc}.\hyperlink{class_cool_time_ac4f32ee513c1328d984306645e8785a4}{getESDate}(); \textcolor{comment}{// "timestamp":"20yy-mm-ddThh:mm:ssZ"}
1289 
1290     userJson += \textcolor{stringliteral}{"\(\backslash\)",\(\backslash\)"mac\(\backslash\)":\(\backslash\)""};
1291 
1292     userJson += tempMAC;
1293 
1294     userJson += \textcolor{stringliteral}{"\(\backslash\)"\}"};
1295 
1296 \textcolor{preprocessor}{#if DEBUG == 1}
1297 
1298     Serial.println( F(\textcolor{stringliteral}{"userData is : "}) );
1299     Serial.println(userJson);
1300     Serial.println();
1301 
1302 \textcolor{preprocessor}{#endif  }
1303     
1304     \textcolor{keywordflow}{return}(userJson);
1305     
1306 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/df9/class_cool_board_ae7358fb6e623cfc81b775f5f1734909b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{d7/df9/class_cool_board_ae7358fb6e623cfc81b775f5f1734909b_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}\label{class_cool_board_a7b835fafd449e5282f7f91d787a2dc15}} 
\index{Cool\+Board@{Cool\+Board}!answer@{answer}}
\index{answer@{answer}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{answer}{answer}}
{\footnotesize\ttfamily String Cool\+Board\+::answer =\char`\"{}\char`\"{}\hspace{0.3cm}{\ttfamily [private]}}

answer string, string that contains received M\+Q\+TT messages 

Definition at line 203 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}\label{class_cool_board_a1b1d3c684a5baa56b08486e192fd8e97}} 
\index{Cool\+Board@{Cool\+Board}!cool\+Board\+Led@{cool\+Board\+Led}}
\index{cool\+Board\+Led@{cool\+Board\+Led}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{cool\+Board\+Led}{coolBoardLed}}
{\footnotesize\ttfamily \hyperlink{class_cool_board_led}{Cool\+Board\+Led} Cool\+Board\+::cool\+Board\+Led\hspace{0.3cm}{\ttfamily [private]}}

Led handler instance 

Definition at line 105 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_af102be5288bd7f7a8e59b13f86e26a00}\label{class_cool_board_af102be5288bd7f7a8e59b13f86e26a00}} 
\index{Cool\+Board@{Cool\+Board}!cool\+Board\+Sensors@{cool\+Board\+Sensors}}
\index{cool\+Board\+Sensors@{cool\+Board\+Sensors}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{cool\+Board\+Sensors}{coolBoardSensors}}
{\footnotesize\ttfamily \hyperlink{class_cool_board_sensors}{Cool\+Board\+Sensors} Cool\+Board\+::cool\+Board\+Sensors\hspace{0.3cm}{\ttfamily [private]}}

Sensor Board handler instance 

Definition at line 100 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}\label{class_cool_board_a427fb753dd8575bdf821c70a5c63d695}} 
\index{Cool\+Board@{Cool\+Board}!data@{data}}
\index{data@{data}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{data}{data}}
{\footnotesize\ttfamily String Cool\+Board\+::data =\char`\"{}\char`\"{}\hspace{0.3cm}{\ttfamily [private]}}

data string, string that contains sensors data 

Definition at line 197 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_af1fe1376fc66f93dee80b327ca695377}\label{class_cool_board_af1fe1376fc66f93dee80b327ca695377}} 
\index{Cool\+Board@{Cool\+Board}!En\+I2C@{En\+I2C}}
\index{En\+I2C@{En\+I2C}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{En\+I2C}{EnI2C}}
{\footnotesize\ttfamily const int Cool\+Board\+::\+En\+I2C = 5\hspace{0.3cm}{\ttfamily [private]}}

Enable I2C pin, double usage for I2C and shift register latch , H\+I\+GH=I2C , L\+OW=shift register latch All I2C is over pins (2,14) 

Definition at line 210 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a09e26264839c65873eb56af476eff6b2}\label{class_cool_board_a09e26264839c65873eb56af476eff6b2}} 
\index{Cool\+Board@{Cool\+Board}!external\+Sensors@{external\+Sensors}}
\index{external\+Sensors@{external\+Sensors}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{external\+Sensors}{externalSensors}}
{\footnotesize\ttfamily \hyperlink{class_external_sensors}{External\+Sensors} Cool\+Board\+::external\+Sensors\hspace{0.3cm}{\ttfamily [private]}}

External Sensors handler instance 

Definition at line 135 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}\label{class_cool_board_a638b00b76aeb819ecfd4c10b8cdd7bb7}} 
\index{Cool\+Board@{Cool\+Board}!external\+Sensors\+Active@{external\+Sensors\+Active}}
\index{external\+Sensors\+Active@{external\+Sensors\+Active}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{external\+Sensors\+Active}{externalSensorsActive}}
{\footnotesize\ttfamily bool Cool\+Board\+::external\+Sensors\+Active =0\hspace{0.3cm}{\ttfamily [private]}}

external\+Sensors flag, set to 1 when using 1/many external Sensor(s) 

Definition at line 164 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}\label{class_cool_board_a42c2586fbb13ff7f06538e9284e8538d}} 
\index{Cool\+Board@{Cool\+Board}!file\+System@{file\+System}}
\index{file\+System@{file\+System}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{file\+System}{fileSystem}}
{\footnotesize\ttfamily \hyperlink{class_cool_file_system}{Cool\+File\+System} Cool\+Board\+::file\+System\hspace{0.3cm}{\ttfamily [private]}}

file\+System handler instance 

Definition at line 95 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_ad103718ce316006c4695b8eb312eaf11}\label{class_cool_board_ad103718ce316006c4695b8eb312eaf11}} 
\index{Cool\+Board@{Cool\+Board}!irene3000@{irene3000}}
\index{irene3000@{irene3000}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{irene3000}{irene3000}}
{\footnotesize\ttfamily \hyperlink{class_irene3000}{Irene3000} Cool\+Board\+::irene3000\hspace{0.3cm}{\ttfamily [private]}}

\hyperlink{class_irene3000}{Irene3000} handler instance 

Definition at line 130 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}\label{class_cool_board_a9c3f7ac625481ee2ae802a25d97a4ae0}} 
\index{Cool\+Board@{Cool\+Board}!irene\+Active@{irene\+Active}}
\index{irene\+Active@{irene\+Active}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{irene\+Active}{ireneActive}}
{\footnotesize\ttfamily bool Cool\+Board\+::irene\+Active =0\hspace{0.3cm}{\ttfamily [private]}}

irene\+Active flag, set to 1 when using an Irene module 

Definition at line 152 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a30b1357881b01ccbec676856a91e48e9}\label{class_cool_board_a30b1357881b01ccbec676856a91e48e9}} 
\index{Cool\+Board@{Cool\+Board}!jet\+Pack@{jet\+Pack}}
\index{jet\+Pack@{jet\+Pack}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{jet\+Pack}{jetPack}}
{\footnotesize\ttfamily \hyperlink{class_jetpack}{Jetpack} Cool\+Board\+::jet\+Pack\hspace{0.3cm}{\ttfamily [private]}}

\hyperlink{class_jetpack}{Jetpack} handler instance 

Definition at line 125 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a9be03a913d26e558328935ca3b59a75e}\label{class_cool_board_a9be03a913d26e558328935ca3b59a75e}} 
\index{Cool\+Board@{Cool\+Board}!jetpack\+Active@{jetpack\+Active}}
\index{jetpack\+Active@{jetpack\+Active}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{jetpack\+Active}{jetpackActive}}
{\footnotesize\ttfamily bool Cool\+Board\+::jetpack\+Active =0\hspace{0.3cm}{\ttfamily [private]}}

jetpack\+Active flag, set to 1 when using a \hyperlink{class_jetpack}{Jetpack} module 

Definition at line 158 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a84bc94413b64973e4aba8c467c97006c}\label{class_cool_board_a84bc94413b64973e4aba8c467c97006c}} 
\index{Cool\+Board@{Cool\+Board}!log\+Interval@{log\+Interval}}
\index{log\+Interval@{log\+Interval}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{log\+Interval}{logInterval}}
{\footnotesize\ttfamily unsigned long Cool\+Board\+::log\+Interval =1\hspace{0.3cm}{\ttfamily [private]}}

log Interval value, the period of time between logs
\begin{DoxyItemize}
\item in Seconds 
\end{DoxyItemize}

Definition at line 191 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}\label{class_cool_board_a7c8e505a5804b109e112d5a03df6ea2b}} 
\index{Cool\+Board@{Cool\+Board}!manual@{manual}}
\index{manual@{manual}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{manual}{manual}}
{\footnotesize\ttfamily bool Cool\+Board\+::manual =0\hspace{0.3cm}{\ttfamily [private]}}

manual flag, set to 1 when using manual mode in manual Mode , user can activate/deactivate actors through a specific M\+Q\+TT command

/!\textbackslash{} in manual Mode, receving an update will not reset the \hyperlink{class_cool_board}{Cool\+Board} /!\textbackslash{} resetting the \hyperlink{class_cool_board}{Cool\+Board} in manual mode will deactivate all actors 

Definition at line 184 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}\label{class_cool_board_a2399f44d7c23c1149a335cb3b46d90f1}} 
\index{Cool\+Board@{Cool\+Board}!mqtt@{mqtt}}
\index{mqtt@{mqtt}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{mqtt}{mqtt}}
{\footnotesize\ttfamily \hyperlink{class_cool_m_q_t_t}{Cool\+M\+Q\+TT} Cool\+Board\+::mqtt\hspace{0.3cm}{\ttfamily [private]}}

M\+Q\+TT handler instance 

Definition at line 120 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a4ac693895c21025b8808653f2a4316e6}\label{class_cool_board_a4ac693895c21025b8808653f2a4316e6}} 
\index{Cool\+Board@{Cool\+Board}!on\+Board\+Actor@{on\+Board\+Actor}}
\index{on\+Board\+Actor@{on\+Board\+Actor}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{on\+Board\+Actor}{onBoardActor}}
{\footnotesize\ttfamily \hyperlink{class_cool_board_actor}{Cool\+Board\+Actor} Cool\+Board\+::on\+Board\+Actor\hspace{0.3cm}{\ttfamily [private]}}

On Board Actor handler instance 

Definition at line 140 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}\label{class_cool_board_a50d2a6716879d64a85f3c6b44ad63275}} 
\index{Cool\+Board@{Cool\+Board}!rtc@{rtc}}
\index{rtc@{rtc}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{rtc}{rtc}}
{\footnotesize\ttfamily \hyperlink{class_cool_time}{Cool\+Time} Cool\+Board\+::rtc\hspace{0.3cm}{\ttfamily [private]}}

R\+TC handler instance 

Definition at line 110 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a0a51b2287139f66c738101fb53139230}\label{class_cool_board_a0a51b2287139f66c738101fb53139230}} 
\index{Cool\+Board@{Cool\+Board}!sleep\+Active@{sleep\+Active}}
\index{sleep\+Active@{sleep\+Active}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{sleep\+Active}{sleepActive}}
{\footnotesize\ttfamily bool Cool\+Board\+::sleep\+Active =0\hspace{0.3cm}{\ttfamily [private]}}

sleep\+Active flag, set to 1 when using sleep Mode in Sleep mode \+: the \hyperlink{class_cool_board}{Cool\+Board} will do a cycle (init, read sensors, do action,log) and go to sleep for a Log\+Interval period of time 

Definition at line 173 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_a6395459131d6889a3005f79c7a35e964}\label{class_cool_board_a6395459131d6889a3005f79c7a35e964}} 
\index{Cool\+Board@{Cool\+Board}!user\+Active@{user\+Active}}
\index{user\+Active@{user\+Active}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{user\+Active}{userActive}}
{\footnotesize\ttfamily bool Cool\+Board\+::user\+Active =0\hspace{0.3cm}{\ttfamily [private]}}

user\+Active flag, set to 1 to collect user\+Data(\+M\+A\+C,user\+Name,\+Time\+Stamp) 

Definition at line 146 of file Cool\+Board.\+h.

\mbox{\Hypertarget{class_cool_board_acd88e6003606b47479ebba81e4aceeca}\label{class_cool_board_acd88e6003606b47479ebba81e4aceeca}} 
\index{Cool\+Board@{Cool\+Board}!wifi\+Manager@{wifi\+Manager}}
\index{wifi\+Manager@{wifi\+Manager}!Cool\+Board@{Cool\+Board}}
\subsubsection{\texorpdfstring{wifi\+Manager}{wifiManager}}
{\footnotesize\ttfamily \hyperlink{class_cool_wifi}{Cool\+Wifi} Cool\+Board\+::wifi\+Manager\hspace{0.3cm}{\ttfamily [private]}}

Wifi handler instance 

Definition at line 115 of file Cool\+Board.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/ashiroji/\+Arduino/libraries/\+Cool\+Board/src/\hyperlink{_cool_board_8h}{Cool\+Board.\+h}\item 
/home/ashiroji/\+Arduino/libraries/\+Cool\+Board/src/\hyperlink{_cool_board_8cpp}{Cool\+Board.\+cpp}\end{DoxyCompactItemize}
